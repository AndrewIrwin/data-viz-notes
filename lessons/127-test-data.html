<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>26&nbsp; Checking your work – Data Visualization notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../lessons/155-dynamics-graphics.html" rel="next">
<link href="../lessons/125-slides.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-485d01fc63b59abcd3ee1bf1e8e2748d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.34.0/datatables.js"></script><script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="../site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script><script src="../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../lessons/127-test-data.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Checking your work</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Data Visualization notes</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/101-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Invitation to Data Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/102-intro-to-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Computer tools</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/103-setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Setting up your computer</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/104-look-at-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Look at data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/105-first-plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Making your first plot</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/106-version-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">What is version control software?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/302-staying-organized.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Staying organized</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/107-grammar-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Grammar of Graphics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/108-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Using the grammar of graphics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/110-summarizing-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summarizing data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/115-facets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Facetted graphs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/106b-using-LLM-to-learn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Using AI to learn</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/111-reading-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Reading data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/112-reshaping-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Reshaping data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/113-data-tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Format tables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/114-asking-questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Getting help and asking questions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/118-working-with-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Working with models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/119-linear-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Linear models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/120-gam-loess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">GAM and LOESS smoothing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/124-collaboration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Collaborating with GitHub</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/301-data-sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Finding and accessing data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/911-ethics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accessibility, Bias, and Ethics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/133-reproducible-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Reproducible reports</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/121-PCA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Principal component analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/122-mds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Multidimensional scaling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/123-kmean.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">K-means clustering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/125-slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Making slides for presentations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/127-test-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Checking your work</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/155-dynamics-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Dynamic graphics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/140-mapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Making maps</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/141-mapping-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Mapping II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/142-mapping-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Alternatives to maps</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/130-bonus-topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Working with text, factors, dates and times</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/201-colour.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Using colour well</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/133-themes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Themes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/160-other-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Beyond tidy data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/130-graphics-output.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Graphics formatting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/134-reconstruction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Reconstructing a visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/499-review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Review</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/901-TMI-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">More details about R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lessons/999-metadata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Metadata</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#an-introduction-to-testing" id="toc-an-introduction-to-testing" class="nav-link active" data-scroll-target="#an-introduction-to-testing"><span class="header-section-number">26.1</span> An introduction to testing</a></li>
  <li><a href="#checking-analysis-and-visualizations" id="toc-checking-analysis-and-visualizations" class="nav-link" data-scroll-target="#checking-analysis-and-visualizations"><span class="header-section-number">26.2</span> Checking analysis and visualizations</a></li>
  <li>
<a href="#data-errors" id="toc-data-errors" class="nav-link" data-scroll-target="#data-errors"><span class="header-section-number">26.3</span> Data errors</a>
  <ul class="collapse">
<li><a href="#sample-data-to-test" id="toc-sample-data-to-test" class="nav-link" data-scroll-target="#sample-data-to-test"><span class="header-section-number">26.3.1</span> Sample data to test</a></li>
  </ul>
</li>
  <li><a href="#data-quality-assurance" id="toc-data-quality-assurance" class="nav-link" data-scroll-target="#data-quality-assurance"><span class="header-section-number">26.4</span> Data quality assurance</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning"><span class="header-section-number">26.5</span> Data cleaning</a></li>
  <li><a href="#analyze-a-subset-of-your-data" id="toc-analyze-a-subset-of-your-data" class="nav-link" data-scroll-target="#analyze-a-subset-of-your-data"><span class="header-section-number">26.6</span> Analyze a subset of your data</a></li>
  <li><a href="#use-fake-data-where-you-already-know-the-answer" id="toc-use-fake-data-where-you-already-know-the-answer" class="nav-link" data-scroll-target="#use-fake-data-where-you-already-know-the-answer"><span class="header-section-number">26.7</span> Use fake data, where you already know the answer</a></li>
  <li><a href="#do-you-calculations-two-different-ways" id="toc-do-you-calculations-two-different-ways" class="nav-link" data-scroll-target="#do-you-calculations-two-different-ways"><span class="header-section-number">26.8</span> Do you calculations two different ways</a></li>
  <li><a href="#at-the-end-of-your-analysis" id="toc-at-the-end-of-your-analysis" class="nav-link" data-scroll-target="#at-the-end-of-your-analysis"><span class="header-section-number">26.9</span> At the end of your analysis</a></li>
  <li><a href="#lessons-for-this-course" id="toc-lessons-for-this-course" class="nav-link" data-scroll-target="#lessons-for-this-course"><span class="header-section-number">26.10</span> Lessons for this course</a></li>
  <li><a href="#packages-used" id="toc-packages-used" class="nav-link" data-scroll-target="#packages-used"><span class="header-section-number">26.11</span> Packages used</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">26.12</span> Further reading</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="testing" class="quarto-section-identifier"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Checking your work</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="an-introduction-to-testing" class="level2" data-number="26.1"><h2 data-number="26.1" class="anchored" data-anchor-id="an-introduction-to-testing">
<span class="header-section-number">26.1</span> An introduction to testing</h2>
<p>You’ve made a data visualization. It looks great. All the calculations necessary are in a single Rmd file – reading the data, organizing the data, and creating the figure. You can revise the data and reproduce the plot any time you want.</p>
<p>But then a thought occurs to you – how do I know the visualization is correct? The computer saves us time by doing calculations for us, but the price is that you can’t keep track of everything it does.</p>
<p>What if there is a problem with the data? Maybe the data you analyzed has a lot of observations – too many to check by hand. Or maybe the data are fine, but something went wrong when you read them into R. There are lots of ways for errors to creep in. Missing values when you thought there were none. Unexpected levels of factors (too many or too few). Detectable errors in the data such as impossible values.</p>
<p>The best idea to counteract all these problems is testing. The secret is to get the computer to perform the tests for you. In this lesson we will discuss two kinds of testing: checking your data and checking your calculations.</p>
<p>A lot of testing is done for you before you even start R: most (we hope all) the packages you use are carefully tested to be sure they work as intended. Still – you might misunderstand what the packages are supposed to do. Or you might make a typo and use the wrong variable name somewhere. Or you might get the logic of your calculation wrong. So you should test your work in as many ways as you can.</p>
<p>The most important reason to test is that you will catch mistakes. Possibly the second most important reason for doing testing – and being explicit about it – is that it can help the people who use your analysis have more confidence in it. This includes you in the future!</p>
</section><section id="checking-analysis-and-visualizations" class="level2" data-number="26.2"><h2 data-number="26.2" class="anchored" data-anchor-id="checking-analysis-and-visualizations">
<span class="header-section-number">26.2</span> Checking analysis and visualizations</h2>
<p>Once you have a preliminary analysis, develop a testing plan. Methods that can help:</p>
<ul>
<li>Check for errors in your data.</li>
<li>Perform your analysis on a small subset of your data that you can understand without computer help. This is the “sample calculation” method of testing.</li>
<li>Perform your analysis on simulated or fake “data” designed to test certain cases (independent variables, strong dependence, etc.) that will allow you to check your methods and interpretation.</li>
<li>Perform your calculations or visualizations two different ways, to check your understanding. This is especially useful if you have a fast and a slow way of doing a calculation. Use the slow way as a check on the fast method.</li>
</ul></section><section id="data-errors" class="level2" data-number="26.3"><h2 data-number="26.3" class="anchored" data-anchor-id="data-errors">
<span class="header-section-number">26.3</span> Data errors</h2>
<p>What kinds of errors can appear in data?</p>
<ul>
<li>Misspellings, upper/lower case inconsistency, extra spaces</li>
<li>Duplicated observations</li>
<li>Miss-coded missing data (writing -999 or 0 instead of NA)</li>
<li>Inconsistently formatted dates and times</li>
<li>Impossible values arising from typographical errors</li>
<li>Data in wrong columns</li>
<li>All the data can look correct, but the methods for collecting data may have changed, creating “silent” errors</li>
</ul>
<p>Why do data sometimes have errors?</p>
<ul>
<li>To answer this, you need to know about the process used to create the data. Were some data output by a particular machine or software package that has errors? Were the data typed in by a single person? Were many different people, who may have had different understandings of the data collection goals, involved? Were the data collected over a long period of time, when machines, people, and goals may have changed?</li>
</ul>
<p>How can you find errors in data?</p>
<ul>
<li>Make summary tables and cross-check the summaries</li>
<li>Look for missing data</li>
<li>Check to be sure the correct number of variables (columns) and rows (observations) are present</li>
<li>Plot histograms and densities</li>
<li>Write tests to test data belong to a legitimate set of values</li>
</ul>
<p>What do you do with errors?</p>
<ul>
<li>Keep original data, so you can revert the change in case of a misunderstanding</li>
<li>Log changes and describe error</li>
<li>Write tests to check for future errros</li>
<li>Communicate with the people who collected the data and the people who will receive the analysis</li>
</ul>
<section id="sample-data-to-test" class="level3" data-number="26.3.1"><h3 data-number="26.3.1" class="anchored" data-anchor-id="sample-data-to-test">
<span class="header-section-number">26.3.1</span> Sample data to test</h3>
<p>The following data were collected by a class of students evaluating their ability to identify a jelly bean flavour by blindfolded testing. Much of our sense of taste comes from smell, so there were two treatments. All participants were blindfolded. In the treatment, the participants blocked their nose to reduce their sense of smell and in the control participants could smell normally. Groups of students entered their data into a single Google docs spreadsheet which was exported to the csv file below.</p>
<p>This dataset has a lot of problems, but they are very typical for data entered by a group of people who are not directly involved in the systematic analysis of the data with a software package like R. (They are not attuned to the problems of data errors.) Take a look at the <a href="static/jelly-bean-data.csv">file</a> and see how many problems you can find before continuing.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"lessons/static/jelly-bean-data.csv"</span><span class="op">)</span>,</span>
<span>                  show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...7`
• `` -&gt; `...8`
• `` -&gt; `...9`
• `` -&gt; `...10`
• `` -&gt; `...11`
• `` -&gt; `...12`
• `` -&gt; `...13`
• `` -&gt; `...14`
• `` -&gt; `...15`
• `` -&gt; `...16`
• `` -&gt; `...17`
• `` -&gt; `...18`
• `` -&gt; `...19`
• `` -&gt; `...20`
• `` -&gt; `...21`
• `` -&gt; `...22`
• `` -&gt; `...23`
• `` -&gt; `...24`
• `` -&gt; `...25`
• `` -&gt; `...26`
• `` -&gt; `...27`</code></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu">datatable</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-303767270ece608e5134" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-303767270ece608e5134">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261"],["PKL","PKL","PKL","LAG","LAG","LAG","KAD","KAD","KAD","CEB","CEB","CEB",null,"VTC","VTC","VTC","PVG","PVG","PVG","AED","AED","AED","RLH","RLH","RLH",null,null,null,null,"LGD","LGD","LGD","HKB","HKB","HKB",null,"LOK","LOK","LOK","ALB","ALB","ALB","EKE","EKE","EKE","FACP","FACP","FACP","JGD","JGD","JGD","ZSF","ZSF","ZSF","EBF","EBF","EBF","AKG","AKG","AKG","CBC","CBC","CBC","AL","AL","AL","XAG","XAG","XAG","EKCL","EKCL","EKCL","ANG","ANG","ANG","AB","AB","AB","JF","JF","JF",null,null,null,"HB","HB","HB","JB","JB","JB","SPE","SPE","SPE","ETH","ETH","ETH","GC","GC","GC","BM","BM","BM","HK","HK","HK","JK","JK","JK","CL","CL","CL","KM",null,null,"AN",null,null,"AM",null,null,"EZ",null,null,"TM",null,null,"MO",null,null,"IR",null,null,"SW",null,null,"JP",null,null,"VP",null,null,"NW",null,null,"PR",null,null,"IO",null,null,"Dw",null,null,"Rm",null,null,null,"Hw",null,null,null,"ER",null,null,null,"JORL",null,null,null,"TT","TT","TT","LM",null,null,"MO",null,null,null,"Tw",null,null,null,null,null,null,null,"LEM",null,null,null,null,null,"AJM",null,null,"ES",null,null,"JT","JT","JT","KM","KM","KM","MR","MR","MR","MW","MW","MW",null,null,"EJS","EJS","EJS","MLM","MLM","MLM","SMS","SMS","SMS",null,null,null,null,null,"DN","DN","DN","KS","KS","KS","RAN","RAN","RAN","AVR","AVR","AVR","BP",null,null,"KAM","KAM","KAM","ECT","ECT","ECT",null,"CM",null,null,"KA",null,null,"BP",null,null,"EW",null,null],["control","control","control","experimental","experimental","experimental","experimental","experimental","experimental","Control","control","control",null,"control","control","control","experimental","experimental","experimental","experimental","experimental","experimental","control","control","control",null,null,null,null,"control","control","control","experimental","experimental","experimental",null,"experimental","experimental","experimental","control","control","control","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","control","control","control","experimental","experimental","experimental","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental",null,null,null,"control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental",null,"control","control","experimental","experimental","experimental","experimental","experimental","experimental","control","control","control","control","control","control","control","control","control","experimental","experimental","experimental",null,"control","control","control",null,"experimental","experimental","experimental",null,"control","control","control",null,"control","control","control","experimental","experimental","experimental","experimental","experimental","experimental",null,"experimental","experimental","experimental",null,null,null,null,null,"experimental","experimental","experimental",null,null,null,"control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental",null,null,"control","control","control","control","control","control","experimental","experimental","experimental",null,null,null,null,null,"control","control","control","experimental","experimental","experimental","control","control","control","experimental","experimental","experimental",null,null,null,"control","control","control","experimental","experimental","experimental",null,"control","control","control","experimental","experimental","experimental","experimental","experimental","experimental","control","control","control"],[1,2,3,1,2,3,1,2,3,1,2,3,null,1,2,3,1,2,3,1,2,3,1,2,3,null,null,null,null,1,2,3,1,2,3,null,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,null,null,null,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,3,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,null,1,2,3,null,1,2,3,null,1,2,3,null,1,2,3,1,2,3,1,2,3,null,1,2,3,null,null,null,null,null,1,2,3,null,null,null,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,1,2,3,null,null,1,2,3,1,1,1,1,2,3,null,null,null,null,null,1,2,3,1,2,3,1,2,3,1,2,3,null,null,null,1,2,3,1,2,3,null,1,2,3,1,2,3,1,2,3,1,2,3],["orange","strawberry","cherry","orange","bubblegum","lemon","orange","coconut","lemon","grape","coconut","banana",null,"banana","cocnut","strawberry","grape","coconut","orange","lemon","grape","cherry","coconut","orange","cherry",null,null,null,null,"Cherry","Banana","Orange","Orange","Cherry","Grape",null,"Cherry","Orange","lemon/lime","cherry","orange","lemon","Banana","Plum","Watermelon","Apple","Banana","Grape","Coconut","Grape","Orange","Pinapple","Coffee","Coconut","grape","lemon","orange","lemon","grape","orange","cherry","grape","lemon","cherry","grape","coconut","Banana","Grape","Coconut","Cherry","Orange","Banana","lime","cherry","coconut","bubblegum","lemon","grape","coconut","orange","grape",null,null,null,"lemon","grape","cherry","orange","lemon","marshmallow","cherry","lemon","blueberry","cherry","licorice","orange","orange","yellow","red","orange","white","purple","Cherry","Grape","Lemon","orange","coconut","lemon","Cherry","lemon","cinnamon","coconut","orange","lemon","orange","grape","banana","Banana","Cherry","Orange","Bubblegum","Lemon","Grape","cherry","lemon","grape","coconut","orange","cherry","Cherry","Orange","Lemon","Lemon","Cherry","Orange","Lemon","orange","cherry","apple","apple","banana","banana","lemon","blueberry","cherry","strawberry","lemon","banana","cherry","orange","lime","orange","cherry","orange","lime","cherry",null,"lime","orange","lemon",null,"purple","red","yellow + white",null,"orange","yellow","white",null,"Lemon","Orange","Coconut","yellow and white","yellow and brown","orange","orange","coconut","grape",null,"apple","lemon","cherry",null,null,null,null,null,"coconut","cherry","orange",null,null,null,"grape","orange","banana","coconut","grape","orange","coconut","lemon","lemon","orange","lemon","raspberry","watermelon","lemon","grape","orange","grape","grape",null,null,"Yellow White","White","Orange","Orange","Yellow Brown","Purple","Purple","Orange","Red",null,null,null,null,null,"Orange","Yellow White","Yellow Brown","Yellow White","White","Orange","Cherry","Coconut","Orange","Lemon","Grape","Orange",null,null,null,"Orange","Lemon","Lime","Orange","Banana","Grape",null,"Banana","Grape","Orange","Banana","Lemon","Orange","orange","purple","yellow and white","purple","orange","yellow and brown"],["7.2","7.6","10.1","10.15","12.24","10.52","12.8","13.2","23.95","13.25","18.5","14.86",null,"35.29","6.65","38.68","21.2","16.25","9.79","26.5","11.5","50.4","4.5","2.6","5.3",null,null,null,null,"35.78","4.43","6.35","23.6","15.56","20.13",null,"9","3.7","10.8","5.5","7","14","5.2","15.2","15.6","14.3","19.4","28.9","4.08","3.03","5.08","11.77","7.65","11.03","17.9","8","19.3","9.1","11.11","5.38","19.77","22.44","35.87","6.2","21.8","11.7","6.49","4.83","30.27","12.32","9.95","13.9","12.6","10","11.6","7.3","12.5","8","16.88","8.15","27.17",null,null,null,"6.64","10.21","6.04","11.39","9.58","12.05","3.71","2.97","5.98","7.75","8.46","4.26","5.35","15.48","12.12","7.65","7.48","9.7","2.6","5.1","4.9","14.5","17.23","15.5","14.17","29.4","5.92","12.7","6.9","6.7","9.9","9.4","5.5","4.58","4.7","4.73","23","8","11","9.9","12.7","11.2","12.3","20.8","13","17","7","7","16","17","22","5.46","9.87","3.62","21.35","9.99","28.08","19.96","14.82","20.73","11.75","24.87","10.56","14.26","8.76","5.65","7.82","4.69","4.81","16.49","12.92","9.86",null,"14","6","2",null,"16","7","11",null,"6.28","3.05","3.32",null,"11","9","4","11.56","9.34","13.01","15.75","39.41","18.4",null,"13","12","11",null,null,null,null,null,"22.23","15.65","6.4",null,null,null,"40","7","3","28","5","23","3.2","2.7","5.6","8.7","12.91","16.15","32","5","53","14","18.8","27.7",null,null,"13.06","3.28","7.23","48","19","24","36","20","41",null,null,null,null,null,"8.6","15.5","12.6","17.8","21.5","Lemon","7.63","24.82","3.2","21.53","10.75","17.55",null,null,null,"7.7","13.9","10.1","19.9","18.2","7.1",null,"25.44","8.67","17.45","43.35","10.76","33.4","36.74","18.57","31.24","4.89","15.95",null],[1,0,0,0,0,0,1,1,0,1,1,1,null,1,1,0,0,0,0,1,1,0,1,1,1,null,null,null,null,0,1,0,0,0,0,null,0,1,1,1,1,1,1,0,0,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,0,1,1,1,1,null,null,null,1,0,1,0,1,0,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,1,0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,1,1,0,0,0,1,0,0,0,null,0,0,0,null,0,0,1,null,1,1,1,null,1,1,1,0,0,0,1,0,0,null,0,0,null,null,null,null,null,null,0,0,0,null,null,null,0,1,1,0,0,0,1,0,1,1,0,0,0,1,0,0,0,0,null,null,0,1,1,0,1,1,1,1,0,null,null,null,null,null,1,1,1,0,0,0,1,0,1,0,1,0,null,null,null,1,0,0,0,1,0,null,1,1,0,0,1,0,0,0,0,1,0,1],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Initials<\/th>\n      <th>Group (choose from drop down)<\/th>\n      <th>Trial #<\/th>\n      <th>Flavour<\/th>\n      <th>Reaction time (in sec)<\/th>\n      <th>Accuracy (0=incorrect, 1=correct)<\/th>\n      <th>...7<\/th>\n      <th>...8<\/th>\n      <th>...9<\/th>\n      <th>...10<\/th>\n      <th>...11<\/th>\n      <th>...12<\/th>\n      <th>...13<\/th>\n      <th>...14<\/th>\n      <th>...15<\/th>\n      <th>...16<\/th>\n      <th>...17<\/th>\n      <th>...18<\/th>\n      <th>...19<\/th>\n      <th>...20<\/th>\n      <th>...21<\/th>\n      <th>...22<\/th>\n      <th>...23<\/th>\n      <th>...24<\/th>\n      <th>...25<\/th>\n      <th>...26<\/th>\n      <th>...27<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Initials","targets":1},{"name":"Group (choose from drop down)","targets":2},{"name":"Trial #","targets":3},{"name":"Flavour","targets":4},{"name":"Reaction time (in sec)","targets":5},{"name":"Accuracy (0=incorrect, 1=correct)","targets":6},{"name":"...7","targets":7},{"name":"...8","targets":8},{"name":"...9","targets":9},{"name":"...10","targets":10},{"name":"...11","targets":11},{"name":"...12","targets":12},{"name":"...13","targets":13},{"name":"...14","targets":14},{"name":"...15","targets":15},{"name":"...16","targets":16},{"name":"...17","targets":17},{"name":"...18","targets":18},{"name":"...19","targets":19},{"name":"...20","targets":20},{"name":"...21","targets":21},{"name":"...22","targets":22},{"name":"...23","targets":23},{"name":"...24","targets":24},{"name":"...25","targets":25},{"name":"...26","targets":26},{"name":"...27","targets":27}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>You should always look at data. For a first look, <code>View</code>, <code>skim</code> (in the <code>skimr</code> package), and <code>glimpse</code> functions are useful and will help you identify some problems.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">jelly</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 261
Columns: 27
$ Initials                            &lt;chr&gt; "PKL", "PKL", "PKL", "LAG", "LAG",…
$ `Group (choose from drop down)`     &lt;chr&gt; "control", "control", "control", "…
$ `Trial #`                           &lt;dbl&gt; 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3…
$ Flavour                             &lt;chr&gt; "orange", "strawberry", "cherry", …
$ `Reaction time (in sec)`            &lt;chr&gt; "7.2", "7.6", "10.1", "10.15", "12…
$ `Accuracy (0=incorrect, 1=correct)` &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1…
$ ...7                                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...8                                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...9                                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...10                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...11                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...12                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...13                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...14                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...15                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...16                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...17                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...18                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...19                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...20                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...21                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...22                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...23                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...24                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...25                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...26                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ...27                               &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA…</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># skimr::skim(jelly)  # try this yourself on some data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are many columns that have no heading and are purely missing data. The <code>janitor</code> package has a function to remove rows and columns that are all missing data. I think some of these column names are a bit long and the punctuation makes them hard to type, so I will rename them to shorter names.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">&lt;-</span> <span class="va">jelly</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">clean_names</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span>group <span class="op">=</span> <span class="va">group_choose_from_drop_down</span>,</span>
<span>         reaction_s <span class="op">=</span> <span class="va">reaction_time_in_sec</span>,</span>
<span>         accuracy <span class="op">=</span> <span class="va">accuracy_0_incorrect_1_correct</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">remove_empty</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="st">"cols"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check to see if there are any more missing data using the <code>miss_var_summary</code> function from the <code>naniar</code> package.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu">miss_var_summary</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n_miss</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pct_miss</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">initials</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">24.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">group</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.873</td>
</tr>
<tr class="odd">
<td style="text-align: left;">reaction_s</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.873</td>
</tr>
<tr class="even">
<td style="text-align: left;">accuracy</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.873</td>
</tr>
<tr class="odd">
<td style="text-align: left;">trial_number</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.437</td>
</tr>
<tr class="even">
<td style="text-align: left;">flavour</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.437</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Are those missing values are a problem? I might choose not to care about the person who collected the data (initials), but a missing flavour or accuracy is a big problem!</p>
<p>The <code>dlookr</code> package provides a similar table, plus it adds a count of the number of distinct values for each variable.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">diagnose</span><span class="op">(</span><span class="va">jelly</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">variables</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">types</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">missing_count</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">missing_percent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">unique_count</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">unique_rate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">initials</td>
<td style="text-align: left;">character</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">24.4541485</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">0.3275109</td>
</tr>
<tr class="even">
<td style="text-align: left;">group</td>
<td style="text-align: left;">character</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.8733624</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.0174672</td>
</tr>
<tr class="odd">
<td style="text-align: left;">trial_number</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.4366812</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.0174672</td>
</tr>
<tr class="even">
<td style="text-align: left;">flavour</td>
<td style="text-align: left;">character</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.4366812</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">0.1921397</td>
</tr>
<tr class="odd">
<td style="text-align: left;">reaction_s</td>
<td style="text-align: left;">character</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.8733624</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">0.8777293</td>
</tr>
<tr class="even">
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">numeric</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.8733624</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.0131004</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We still don’t know what most of these variables mean, but already one thing should stand out. The variable <code>accuracy</code> (which originally also had the notation 0_incorrect_1_correct) presumably should only be 0 or 1, but has three different values. We may not care about the initials of the investigator, but we might be concerned about the fact that there are 56 missing values. The reaction time (measured in seconds) is text data, but should be a number.</p>
</section></section><section id="data-quality-assurance" class="level2" data-number="26.4"><h2 data-number="26.4" class="anchored" data-anchor-id="data-quality-assurance">
<span class="header-section-number">26.4</span> Data quality assurance</h2>
<p>You can get report on your data using the <code>pointblank</code> package. (See the documentation linked in further reading for examples.) Let’s test a few things:</p>
<ul>
<li>are any values of the accuracy variable not 0 or 1?</li>
<li>is reaction time and trial_number numeric? (We know the answer already, but I’ll show how to test this condition.)</li>
<li>are there any negative reaction times?</li>
<li>are all the rows distinct? (It’s unlikely, but not impossible to get the same result twice.)</li>
</ul>
<p>First we will write the tests.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_test</span> <span class="op">&lt;-</span> <span class="va">jelly</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">create_agent</span><span class="op">(</span>actions <span class="op">=</span> <span class="fu">action_levels</span><span class="op">(</span>warn_at <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">col_vals_in_set</span><span class="op">(</span><span class="va">accuracy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">col_is_numeric</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="va">trial_number</span>, <span class="va">reaction_s</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">col_vals_gt</span><span class="op">(</span><span class="va">reaction_s</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rows_distinct</span><span class="op">(</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now you can use the tests to get a report. The report is not shown because it doesn’t fit well into a knitted document. Open up your own R session, read the data, clean it, and produce a report using the following code.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_test</span> <span class="op">|&gt;</span> <span class="fu">interrogate</span><span class="op">(</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Reaction time (in seconds) is text not a number. Let’s fix that. Probably there will be some non-numeric values in there, because otherwise the data would have been read as numeric. So let’s look for those rows first. If you try to convert text to a number and the text doesn’t look like a number, you’ll get an NA instead. So filter out the NAs that get created when you convert from text to number. R will give us a message to alert us to the fact that there are some NAs created.</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">reaction_s</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `filter()`.
ℹ In argument: `is.na(as.numeric(reaction_s))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">initials</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">trial_number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">reaction_s</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">accuracy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">KS</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Orange</td>
<td style="text-align: left;">Lemon</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">BP</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">yellow and brown</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>One of those is obviously an error. (Lemon is not a number!) In a careful analysis, you would contact the person who recorded the data (that’s what the initials are for) and find out what went wrong. Same thing with the NA, where the time didn’t get recorded. For now, we’ll just throw away these numbers.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">&lt;-</span> <span class="va">jelly</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>reaction_s <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">reaction_s</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">reaction_s</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The pointblank package also has a helpful function to produce a structured report on your whole dataset. Again the results are not shown here; create the report in your own R session to see what it looks like.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu">scan_data</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="data-cleaning" class="level2" data-number="26.5"><h2 data-number="26.5" class="anchored" data-anchor-id="data-cleaning">
<span class="header-section-number">26.5</span> Data cleaning</h2>
<p>Freshly collected and tabulated data are often “dirty”: there are errors in the data such as typographical errors, impossible values, or simply more detail than is appropriate for your analysis. Preparing a dataset for analysis is called <a href="https://en.wikipedia.org/wiki/Data_cleansing">data cleaning</a> and it can be a complex and lengthy task that is at least as complex as analyzing data. Although there are common tasks performed in data cleaning, every dataset presents its own set of challenges. That’s the reason we usually use “clean” data in courses.</p>
<p>Data cleaning tasks are very individual and can take considerable creativity. Here we’ll just try a few.</p>
<p>Let’s look at the values of <code>flavour</code>. It seems like there are a lot of them.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu">count</span><span class="op">(</span><span class="va">flavour</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">arrange</span><span class="op">(</span><span class="op">-</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">orange</td>
<td style="text-align: right;">32</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Orange</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">cherry</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grape</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">coconut</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cherry</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">Banana</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Grape</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lemon</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">banana</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Coconut</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lime</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">purple</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yellow White</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">apple</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">strawberry</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Purple</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">White</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Yellow Brown</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">blueberry</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">bubblegum</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">red</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">white</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow and white</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Apple</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bubblegum</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Coffee</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lime</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pinapple</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Plum</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Red</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Watermelon</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cinnamon</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">cocnut</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lemon/lime</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">licorice</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">marshmallow</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">raspberry</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">watermelon</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow + white</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow and brown</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We definitely have some duplication. I’ll do one correction – changing all letters to lower case so differences in capitalization don’t duplicate flavours. (This simple change eliminates 13 different values of flavour.) If you look closely at the data, you will find spelling errors, different codings (and, +, or neither), and one missing flavour.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu">mutate</span><span class="op">(</span>flavour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">flavour</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">flavour</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">arrange</span><span class="op">(</span><span class="op">-</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">orange</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon</td>
<td style="text-align: right;">32</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cherry</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">grape</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="odd">
<td style="text-align: left;">coconut</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">banana</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purple</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">lime</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">apple</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">white</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bubblegum</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">red</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">strawberry</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow white</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">blueberry</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">watermelon</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow and white</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow brown</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">cinnamon</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cocnut</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">coffee</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lemon/lime</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">licorice</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">marshmallow</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">pinapple</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">plum</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">raspberry</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow + white</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow and brown</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Use what you learned to tidy the data. Here are some changes I’ll make before continuing the analysis.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">&lt;-</span> <span class="va">jelly</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>flavour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">flavour</span><span class="op">)</span>,</span>
<span>         flavour <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">flavour</span> <span class="op">==</span> <span class="st">"cocnut"</span> <span class="op">~</span> <span class="st">"coconut"</span>, </span>
<span>                             <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">flavour</span><span class="op">)</span>, </span>
<span>         flavour <span class="op">=</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">flavour</span>, <span class="st">" and "</span>, <span class="st">" "</span><span class="op">)</span>,</span>
<span>         flavour <span class="op">=</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">flavour</span>, <span class="st">"[/+]"</span>, <span class="st">" "</span><span class="op">)</span>,</span>
<span>         flavour <span class="op">=</span> <span class="fu">str_squish</span><span class="op">(</span><span class="va">flavour</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="analyze-a-subset-of-your-data" class="level2" data-number="26.6"><h2 data-number="26.6" class="anchored" data-anchor-id="analyze-a-subset-of-your-data">
<span class="header-section-number">26.6</span> Analyze a subset of your data</h2>
<p>Let’s compute the average reaction time for correct and incorrect answers for each flavour and each treatment. We will count the number of observations for each grouping too.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">flavour</span>, <span class="va">group</span>, <span class="va">accuracy</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>            mean_reaction_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">reaction_s</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">accuracy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_reaction_time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">apple</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">14.660000</td>
</tr>
<tr class="even">
<td style="text-align: left;">banana</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">12.616667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">banana</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">24.222500</td>
</tr>
<tr class="even">
<td style="text-align: left;">banana</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">17.166667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">blueberry</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.980000</td>
</tr>
<tr class="even">
<td style="text-align: left;">blueberry</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20.730000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bubblegum</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.300000</td>
</tr>
<tr class="even">
<td style="text-align: left;">bubblegum</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">17.620000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cherry</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">17.487500</td>
</tr>
<tr class="even">
<td style="text-align: left;">cherry</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">6.785000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cherry</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">15.835455</td>
</tr>
<tr class="even">
<td style="text-align: left;">cherry</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12.320000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cherry</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">cinnamon</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.920000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">coconut</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">22.596667</td>
</tr>
<tr class="even">
<td style="text-align: left;">coconut</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">6.821667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">coconut</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">18.861111</td>
</tr>
<tr class="even">
<td style="text-align: left;">coconut</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15.040000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">coffee</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.650000</td>
</tr>
<tr class="even">
<td style="text-align: left;">grape</td>
<td style="text-align: left;">Control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13.250000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grape</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">23.903333</td>
</tr>
<tr class="even">
<td style="text-align: left;">grape</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">5.926000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">grape</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">17.655833</td>
</tr>
<tr class="even">
<td style="text-align: left;">grape</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">16.473333</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10.756000</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">7.138750</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">17.110000</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">15.613333</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.460000</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon lime</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10.800000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">licorice</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8.460000</td>
</tr>
<tr class="even">
<td style="text-align: left;">lime</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">10.640000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lime</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">12.760000</td>
</tr>
<tr class="even">
<td style="text-align: left;">marshmallow</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12.050000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">orange</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">14.307778</td>
</tr>
<tr class="even">
<td style="text-align: left;">orange</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">6.546250</td>
</tr>
<tr class="odd">
<td style="text-align: left;">orange</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">18.295000</td>
</tr>
<tr class="even">
<td style="text-align: left;">orange</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10.086000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pinapple</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.770000</td>
</tr>
<tr class="even">
<td style="text-align: left;">plum</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">15.200000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purple</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">14.445000</td>
</tr>
<tr class="even">
<td style="text-align: left;">purple</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">14.756667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purple</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">36.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">raspberry</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">16.150000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">red</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12.120000</td>
</tr>
<tr class="even">
<td style="text-align: left;">red</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">24.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">strawberry</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">23.716667</td>
</tr>
<tr class="even">
<td style="text-align: left;">watermelon</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">23.800000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3.300000</td>
</tr>
<tr class="even">
<td style="text-align: left;">white</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">21.500000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.480000</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">9.265000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow brown</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">15.800000</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow brown</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">9.340000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow white</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13.060000</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow white</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">15.500000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">yellow white</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20.200000</td>
</tr>
<tr class="even">
<td style="text-align: left;">yellow white</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11.000000</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This is a fairly simple calculation, but it serves to demonstrate the “manual check” method. Filter out just the incorrect, experimental results for apple flavours. Check that the number of rows and average match.</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">jelly</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">flavour</span> <span class="op">==</span> <span class="st">"apple"</span>,</span>
<span>                 <span class="va">accuracy</span> <span class="op">==</span> <span class="fl">0</span>,</span>
<span>                 <span class="va">group</span> <span class="op">==</span> <span class="st">"experimental"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">initials</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">trial_number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">reaction_s</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">accuracy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FACP</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">apple</td>
<td style="text-align: right;">14.30</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">VP</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">apple</td>
<td style="text-align: right;">21.35</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">apple</td>
<td style="text-align: right;">9.99</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tw</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">apple</td>
<td style="text-align: right;">13.00</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Looks good!</p>
</section><section id="use-fake-data-where-you-already-know-the-answer" class="level2" data-number="26.7"><h2 data-number="26.7" class="anchored" data-anchor-id="use-fake-data-where-you-already-know-the-answer">
<span class="header-section-number">26.7</span> Use fake data, where you already know the answer</h2>
<p>I’ll create some simple data and then compute the averages using exactly the same code I wrote above. I’ll put in a NA in one row just to see what happens.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_jelly</span> <span class="op">&lt;-</span> <span class="fu">tribble</span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">group</span>, <span class="op">~</span> <span class="va">flavour</span>, <span class="op">~</span> <span class="va">reaction_s</span>, <span class="op">~</span> <span class="va">accuracy</span>,</span>
<span>  <span class="st">"experimental"</span>, <span class="st">"lime"</span>, <span class="fl">1</span>, <span class="fl">1</span>,</span>
<span>  <span class="st">"experimental"</span>, <span class="st">"lime"</span>, <span class="fl">2</span>, <span class="fl">1</span>,</span>
<span>  <span class="st">"experimental"</span>, <span class="st">"lemon"</span>, <span class="fl">3</span>, <span class="fl">1</span>,</span>
<span>  <span class="st">"control"</span>, <span class="st">"lemon"</span>, <span class="fl">4</span>, <span class="fl">1</span>,</span>
<span><span class="op">)</span></span>
<span><span class="va">my_jelly</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">group</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">reaction_s</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">accuracy</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">experimental</td>
<td style="text-align: left;">lime</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">experimental</td>
<td style="text-align: left;">lime</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">experimental</td>
<td style="text-align: left;">lemon</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">control</td>
<td style="text-align: left;">lemon</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>I know exactly what I’m expecting. Stop and decide for yourself before reading on.</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_jelly</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">flavour</span>, <span class="va">group</span>, <span class="va">accuracy</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>            mean_reaction_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">reaction_s</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">accuracy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_reaction_time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lime</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.5</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="do-you-calculations-two-different-ways" class="level2" data-number="26.8"><h2 data-number="26.8" class="anchored" data-anchor-id="do-you-calculations-two-different-ways">
<span class="header-section-number">26.8</span> Do you calculations two different ways</h2>
<p>Suppose we weren’t really confident that we knew what <code>mean</code> does? Even simple functions like <code>sd</code> (for standard deviation) and <code>median</code> might not do what you think they should. How can we check it? Let’s write our own function based on sum, length, and division.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">my_mean</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">my_jelly</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">flavour</span>, </span>
<span>                      <span class="va">group</span>, </span>
<span>                      <span class="va">accuracy</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">flavour</span><span class="op">)</span>,</span>
<span>            mean_reaction_time <span class="op">=</span> <span class="fu">my_mean</span><span class="op">(</span><span class="va">reaction_s</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable_styling</span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">flavour</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">group</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">accuracy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_reaction_time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">lemon</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lime</td>
<td style="text-align: left;">experimental</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.5</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Excellent! We got the same answers.</p>
<p>That’s an introduction to testing calculations. These are good checks to make as you calculate and test your analysis. The next step is to write computer code that checks your answers as well, by giving sample data to your calculation code along with the known answers. There is a package (of course!) for helping with that: <code>testthat</code> and <code>tinytest</code> (links below). We won’t be using these in the course, but you should take time to learn about them after the course.</p>
</section><section id="at-the-end-of-your-analysis" class="level2" data-number="26.9"><h2 data-number="26.9" class="anchored" data-anchor-id="at-the-end-of-your-analysis">
<span class="header-section-number">26.9</span> At the end of your analysis</h2>
<ul>
<li>Provide a relatively simple dataset together with analysis results that can be used to verify your code is working the same way in the future, or that someone who develops a new way of analysing the data can use for comparison</li>
<li>Document any testing processes you used for your data and for your computer code so that later users will know what problems you looked for</li>
<li>Document any problems you found in the data and what steps you took to fix the problems</li>
<li>Describe any weaknesses in your method which anticipate might cause problems for future users</li>
</ul></section><section id="lessons-for-this-course" class="level2" data-number="26.10"><h2 data-number="26.10" class="anchored" data-anchor-id="lessons-for-this-course">
<span class="header-section-number">26.10</span> Lessons for this course</h2>
<p>We are not integrating testing into our work in this course. This lesson is here to alert you to this problem, ensure you know many people think carefully about this, and to show you the first steps to developing a good quality assurance plan. Be aware that testing takes time – possibly as much time as “the rest” of the work you do for data analysis.</p>
</section><section id="packages-used" class="level2" data-number="26.11"><h2 data-number="26.11" class="anchored" data-anchor-id="packages-used">
<span class="header-section-number">26.11</span> Packages used</h2>
<p>In addition to <code>tidyverse</code>, <code>here</code> and <code>kableExtra</code> we’ve used the following packages</p>
<ul>
<li>
<code>janitor</code> for <code>clean_names</code> and to remove columns of purely missing data</li>
<li>
<code>naniar</code> to summarize missing data</li>
<li>
<code>pointblank</code> to make more detailed reports on data tables</li>
<li>
<code>dlookr</code> to summarize data</li>
<li>
<code>DT</code> for table formatting</li>
</ul></section><section id="further-reading" class="level2" data-number="26.12"><h2 data-number="26.12" class="anchored" data-anchor-id="further-reading">
<span class="header-section-number">26.12</span> Further reading</h2>
<ul>
<li>
<a href="https://towardsdatascience.com/the-ultimate-guide-to-data-cleaning-3969843991d4">Data cleaning</a> overview</li>
<li>
<a href="https://github.com/rich-iannone/pointblank">pointblank</a> documentation and examples</li>
<li>
<a href="https://cran.r-project.org/web/packages/dlookr/vignettes/diagonosis.html">dlookr</a> documentation and examples</li>
<li>
<a href="https://github.com/ekstroem/dataMaid">dataMaid</a> documentation for data cleaning</li>
<li>For testing R code, look at <a href="https://cran.r-project.org/web/packages/tinytest/vignettes/using_tinytest.pdf">tinytest</a> and <a href="https://testthat.r-lib.org/">testthat</a>
</li>
</ul>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../lessons/125-slides.html" class="pagination-link" aria-label="Making slides for presentations">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Making slides for presentations</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../lessons/155-dynamics-graphics.html" class="pagination-link" aria-label="Dynamic graphics">
        <span class="nav-page-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Dynamic graphics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>